<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link href="../css/app.css" rel="stylesheet" />
		<link href="../css/login.css" rel="stylesheet" />
	</head>

	<body style="background: #ffffff;">
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		    <h1 class="mui-title">注册登录</h1>
		</header>
		
		<div class="mui-content">
			
			 <div class="center row">
                <span class="code_text">请输入185****2904的短信验证码</span>
                <span class="sixty">60秒后可重新获取</span>
            </div>


            <div class="number row">
                <div class="numin row">
                    <span class="inutVal"></span>
                    <div class="cursor"></div>
                </div>
                <div class="numin row">
                    <span class="inutVal"></span>
                    <span class="cursor hideClass"></span>
                </div>
                <div class="numin row">
                    <span class="inutVal"></span>
                    <span class="cursor hideClass"></span>
                </div>
                <div class="numin row">
                    <span class="inutVal"></span>
                    <span class="cursor hideClass"></span>
                </div>
                <div class="numin row">
                    <span class="inutVal"></span>
                    <span class="cursor hideClass"></span>
                </div>
                <div class="numin row">
                    <span class="inutVal"></span>
                    <span class="cursor hideClass"></span>
                </div>
            </div>
            
            <input type="tel" class="realInput" maxlength="6" oninput="if(value.length>6)value=value.slice(0,6)" pattern="[0-9]*" >
            
            <button type="button" class="mui-btn mui-btn-link next" onclick="login();">注册并登录</div>
            <div class="bottom row">
                <img src="../images/un_selected.png" class="selectRadio" onclick="agreeBtn();"/>
                <span class="bottom-next">点击下一步表示同意</span>
                <span class="bottom-a" onclick="openAgree();">《用户注册协议》</span>
            </div>
		</div>
		
		<script src="../js/mui.min.js"></script>
		<script src="../js/jquery-2.1.1.min.js"></script>
		<script src="../js/app.js"></script>
		<script type="text/javascript">
			mui.init();
			var intervalObj, time = 60;
			mui.plusReady(function() {});
			countDown();
			function countDown(){
				intervalObj = setInterval(function(){
					time--;
					if(time == 0){
						time = 60;
						clearInterval(intervalObj);
						$(".sixty").text("重新获取");
					}else{
						$(".sixty").text(time+"秒后可重新获取");
					}
					
				}, 1000);
			}
			
			$('.sixty').click(function(){
				if($(this).text() == "重新获取"){
					countDown();
				}
			})
			
			var nativeWebview, imm, InputMethodManager;
			var initNativeObjects = function() {
				if (mui.os.android) {
					var main = plus.android.runtimeMainActivity();
					var Context = plus.android.importClass("android.content.Context");
					InputMethodManager = plus.android.importClass("android.view.inputmethod.InputMethodManager");
					imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);
				} else {
					nativeWebview = plus.webview.currentWebview().nativeInstanceObject();
				}
			};
			var showSoftInput = function() {
				if (mui.os.android) {
					imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);
				} else {
					nativeWebview.plusCallMethod({
						"setKeyboardDisplayRequiresUserAction": false
					});
				}
				setTimeout(function() {
					var inputElem = document.querySelector('input');
					inputElem.focus();
					inputElem.parentNode.classList.add('mui-active'); //第一个是search，加上激活样式
				}, 200);
			};
			
			mui.plusReady(function(){
				initNativeObjects();
				showSoftInput();
      			
      			$(".realInput").bind("input propertychange",function () {
	                var value = $(".realInput").val();
	                var length = value.length;
	                console.log( length);
	                
	                
	                
	                $(".inutVal").each(function(index){
	                    
	                    if(length > index){
	                        $(this).text(value[index]);
	                    }else{
	                        $(this).text("");
	                    }
	                    console.log($(this))
	                });
	                
	                $(".cursor").each(function(index){
	                    if(length != index){
	                        $(this).addClass("hideClass");
	                    }
	                    
	                    if(length == index){
	                        $(this).removeClass("hideClass");
	                    }
	                    console.log($(this))
	                });
	                
	                if(length == 6){
	                    //输入完成
	                    
	                    return;
	                }
            	});
            	
            	
            	
      		})
			
			/**
			 * 同意
			 */
			function agreeBtn(){
				console.log($('.selectRadio').attr('src'))
				if($('.selectRadio').attr('src') == '../images/agress_icon.png'){
					$('.selectRadio').attr('src','../images/un_selected.png');
				}else{
					$('.selectRadio').attr('src','../images/agress_icon.png');
				}
				
			}
			
			/**
			 * 登录的网络请求
			 */
			function login(){
				if($('.selectRadio').attr('src') == '../images/agress_icon.png'){
					mui.openWindow({
		      			url: 'home.html',
		      			id: 'home.html',
		      		})
				}else{
					mui.toast("请同意用户协议")
				}
	  			
	  		}
			/**
			 * 打开用户协议
			 */
			function openAgree(){
				var content = "一、平台声明 <br> 1．本协议内容包括以下条款及已经发布的或将来可能发布的各类规则、公告或通知。所有规则为本协议不可分割的一部分，与本协议正文具有同等法律效力。本协议是由您与本公司共同签订的，适用于您在平台的全部交易活动。在您注册时，您已经阅读、理解并接受本协议的全部条款及各类规则，并承诺遵守中国现行的法律、法规、规章及其他政府规定，如有违反而导致任何法律后果的发生，您将以自己的名义独立承担所有相应的法律责任。<br> 2．本平台有权根据需要不时地制定、修改本协议或各类规则，如本协议及规则有任何变更，本平台将在网站（如有）、手机客户端上刊载公告，经修订的本协议、规则一经公布后，立即自动生效。您应不时地注意本协议及规则的变更。您在公告之日后登陆本平台或继续使用本平台提供的任何一项服务的，即表示您已仔细阅读、充分理解并接受修改后的协议内容，也将遵循修改后的协议内容使用本平台提供的有关服务；若您不同意相关变更，您应该立即停止使用本平台提";
				Global.showModal("用户注册协议", content);
			}
			
		</script>
	</body>

</html>